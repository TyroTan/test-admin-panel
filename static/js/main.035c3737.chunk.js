(this["webpackJsonptest-admin-panel"]=this["webpackJsonptest-admin-panel"]||[]).push([[5],{24:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return i}));var r=n(4),a=n.n(r),o=n(8),u=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r,o,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=r={token:"",user_id:0,email:"",is_admin:!1};try{o=JSON.parse(null!==(u=localStorage.getItem("userData"))&&void 0!==u?u:"")}catch(a){}return e.abrupt("return",(null===(t=o)||void 0===t||null===(n=t.token)||void 0===n?void 0:n.length)?o:r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n="string"===typeof t?t:JSON.stringify(t),localStorage.setItem("userData",n)}catch(r){}return e.abrupt("return");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,localStorage.setItem("userData",""),e.abrupt("return",!0);case 5:e.prev=5,e.t0=e.catch(0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();t.a=u},32:function(e,t,n){e.exports=n(54)},37:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(21),u=n.n(o),c=(n(37),n(12)),i=n(6),s=(n(38),n(39),n(40),n(41),n(42),n(4)),l=n.n(s),d=n(8),h=n(17),p=n(18),m=n(19),f=n(20),b=n(11),v=n.n(b),g=n(14),k=n.n(g),w=(n(48),n(49),n(24));function y(e,t){t||(t=e);var n=function(n){Object(f.a)(o,n);var r=Object(m.a)(o);function o(e){var t;return Object(h.a)(this,o),(t=r.call(this,e)).mounted=!1,t.state={component:null,authed:!0,authedButRedirectTo:""},t}return Object(p.a)(o,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentDidMount",value:function(){var n=Object(d.a)(l.a.mark((function n(){var r,o,u;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v.a.start(),this.mounted=!0,n.next=4,t();case 4:if(r=n.sent,o=r.default,n.prev=6,!0!==e.requiresAuth){n.next=24;break}return n.next=10,Object(w.b)();case 10:if(u=n.sent,console.log("authedauthed",u),v.a.done(),!u||!u.token){n.next=22;break}if(!this.mounted){n.next=20;break}if(!e.ifAuthedRedirectTo||"string"!==typeof e.ifAuthedRedirectTo){n.next=18;break}return this.setState({authedButRedirectTo:e.ifAuthedRedirectTo}),n.abrupt("return");case 18:console.log("typeof Component",typeof o),this.setState({component:a.a.createElement(o,this.props)});case 20:n.next=24;break;case 22:return this.setState({authed:!1,component:a.a.createElement(o,this.props)}),n.abrupt("return");case 24:n.next=31;break;case 26:n.prev=26,n.t0=n.catch(6),console.log("error, redirect to login",n.t0),this.mounted=!1,v.a.done();case 31:case"end":return n.stop()}}),n,this,[[6,26]])})));return function(){return n.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.component||a.a.createElement("div",null),t=this.props.location.pathname;return!0===this.state.authed?this.state.authedButRedirectTo?a.a.createElement(i.a,{to:{pathname:this.state.authedButRedirectTo}}):a.a.createElement(k.a,{type:"text",rows:7,ready:null!==e},e):"/login"===t?a.a.createElement(k.a,{type:"text",rows:7,ready:null!==e},e):a.a.createElement(i.a,{to:{pathname:"/login",state:{from:this.props.location}}})}}]),o}(r.Component);return Object(i.g)(n)}var E=function(){return a.a.createElement(c.a,{basename:window.location.pathname||""},a.a.createElement(i.d,null,a.a.createElement(i.b,{path:"/login",component:y({requiresAuth:!0,ifAuthedRedirectTo:"/admin/dashboard"},(function(){return Promise.all([n.e(0),n.e(2),n.e(4)]).then(n.bind(null,608))}))}),a.a.createElement(i.b,{path:"/admin",component:y({requiresAuth:!0},(function(){return Promise.all([n.e(0),n.e(1),n.e(3)]).then(n.bind(null,603))}))}),a.a.createElement(i.b,{path:"/admin/dashboard",component:y({requiresAuth:!0},(function(){return Promise.all([n.e(0),n.e(1),n.e(3)]).then(n.bind(null,603))}))}),a.a.createElement(i.a,{from:"/",to:"/admin/dashboard"}),a.a.createElement(i.b,{component:y({requiresAuth:!0,ifAuthedRedirectTo:"/admin/dashboard"},(function(){return Promise.all([n.e(0),n.e(2),n.e(4)]).then(n.bind(null,608))}))})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,6,7]]]);
//# sourceMappingURL=main.035c3737.chunk.js.map